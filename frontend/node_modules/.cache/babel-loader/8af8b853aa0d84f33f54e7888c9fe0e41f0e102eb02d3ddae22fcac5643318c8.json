{"ast":null,"code":"var Validator = require('./validator.js');\nvar common = require('./common.js');\nvar serialize = require('./serialize.js');\n\n//\n// *Of Validator\n//\n\nfunction OfValidator(context, items, type) {\n  this.items = items;\n  Validator.call(this, context, type);\n}\ncommon.extend(OfValidator.prototype, Validator.prototype);\nOfValidator.prototype.toJSON = function () {\n  var schema = {};\n  schema[this.type] = this.items.map(function (item) {\n    return item.toJSON();\n  });\n  return Validator.prototype.toJSON.call(this, schema);\n};\nOfValidator.prototype.fromJSON = function (schema) {\n  this.items = schema[this.type].map(function (item) {\n    return serialize.fromJSON(item);\n  });\n  return Validator.prototype.fromJSON.call(this, schema);\n};\n\n//\n// AllOf Validator\n//\n\nfunction AllOfValidator(context, items) {\n  OfValidator.call(this, context, items, 'allOf');\n  this.addCheck(function (value, options, path) {\n    var errors = [];\n    var self = this;\n    this.items.forEach(function (item) {\n      self.addErrors(errors, item.validate(value, options, path));\n    });\n    return errors;\n  });\n}\n;\ncommon.extend(AllOfValidator.prototype, OfValidator.prototype);\n\n//\n// AnyOf Validator\n//\n\nfunction AnyOfValidator(context, items) {\n  OfValidator.call(this, context, items, 'anyOf');\n  this.addCheck(function (value, options, path) {\n    var errors = [];\n    var valid = false;\n    this.items.forEach(function (item) {\n      valid = item.validate(value, options, path).length === 0 || valid;\n    });\n    if (!valid) {\n      this.addError(errors, 'Value does not match any of the schemas', 'anyOf', path);\n    }\n    return errors;\n  });\n}\n;\ncommon.extend(AnyOfValidator.prototype, AllOfValidator.prototype);\n\n//\n// OneOf Validator\n//\n\nfunction OneOfValidator(context, items) {\n  OfValidator.call(this, context, items, 'oneOf');\n  this.addCheck(function (value, options, path) {\n    var errors = [];\n    var valid = 0;\n    this.items.forEach(function (item) {\n      valid += item.validate(value, options, path).length === 0 ? 1 : 0;\n    });\n    if (valid === 0) {\n      this.addError(errors, 'oneOf', 'Value does not validate against one of the schemas');\n    }\n    if (valid > 1) {\n      this.addError(errors, 'oneOf', 'Value does validate against more than one of the schemas');\n    }\n    return errors;\n  });\n}\n;\ncommon.extend(OneOfValidator.prototype, AllOfValidator.prototype);\n\n//\n// exports\n//\n\nmodule.exports = {\n  AllOfValidator: AllOfValidator,\n  AnyOfValidator: AnyOfValidator,\n  OneOfValidator: OneOfValidator\n};","map":{"version":3,"names":["Validator","require","common","serialize","OfValidator","context","items","type","call","extend","prototype","toJSON","schema","map","item","fromJSON","AllOfValidator","addCheck","value","options","path","errors","self","forEach","addErrors","validate","AnyOfValidator","valid","length","addError","OneOfValidator","module","exports"],"sources":["C:/game/mern/node_modules/jski/lib/ofs.js"],"sourcesContent":["var Validator = require('./validator.js');\nvar common = require('./common.js');\nvar serialize = require('./serialize.js');\n\n\n//\n// *Of Validator\n//\n\nfunction OfValidator(context, items, type) {\n\n  this.items = items;\n  Validator.call(this, context, type);\n}\n\ncommon.extend(OfValidator.prototype, Validator.prototype);\n\n\nOfValidator.prototype.toJSON = function() {\n  var schema = {};\n  schema[this.type] = this.items.map(function(item) {\n    return item.toJSON();\n  });\n  return Validator.prototype.toJSON.call(this, schema);\n};\n\n\nOfValidator.prototype.fromJSON = function(schema) {\n  this.items = schema[this.type].map(function(item) {\n    return serialize.fromJSON(item);\n  });\n  return Validator.prototype.fromJSON.call(this, schema);\n};\n\n\n//\n// AllOf Validator\n//\n\nfunction AllOfValidator(context, items) {\n\n  OfValidator.call(this, context, items, 'allOf');\n\n  this.addCheck(function(value, options, path) {\n    var errors = [];\n    var self = this;\n\n    this.items.forEach(function(item) {\n      self.addErrors(errors, item.validate(value, options, path));\n    });\n    return errors;\n  });\n};\n\ncommon.extend(AllOfValidator.prototype, OfValidator.prototype);\n\n\n//\n// AnyOf Validator\n//\n\nfunction AnyOfValidator(context, items) {\n\n  OfValidator.call(this, context, items, 'anyOf');\n\n  this.addCheck(function(value, options, path) {\n    var errors = [];\n    var valid = false;\n\n    this.items.forEach(function(item) {\n      valid = item.validate(value, options, path).length === 0 || valid;\n    });\n    if (!valid) {\n      this.addError(errors, 'Value does not match any of the schemas', 'anyOf', path);\n    }\n    return errors;\n  });\n};\n\ncommon.extend(AnyOfValidator.prototype, AllOfValidator.prototype);\n\n\n//\n// OneOf Validator\n//\n\nfunction OneOfValidator(context, items) {\n\n  OfValidator.call(this, context, items, 'oneOf');\n\n  this.addCheck(function(value, options, path) {\n    var errors = [];\n    var valid = 0;\n\n    this.items.forEach(function(item) {\n      valid += (item.validate(value, options, path).length === 0) ? 1 : 0;\n    });\n    if (valid === 0) {\n      this.addError(errors, 'oneOf', 'Value does not validate against one of the schemas');\n    }\n    if (valid > 1) {\n      this.addError(errors, 'oneOf', 'Value does validate against more than one of the schemas');\n    }\n    return errors;\n  });\n};\n\ncommon.extend(OneOfValidator.prototype, AllOfValidator.prototype);\n\n\n//\n// exports\n//\n\nmodule.exports = {\n  AllOfValidator: AllOfValidator,\n  AnyOfValidator: AnyOfValidator,\n  OneOfValidator: OneOfValidator\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}