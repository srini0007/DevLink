{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  post: null,\n  posts: [],\n  error: [],\n  loading: true\n};\nconst postSlice = createSlice({\n  name: 'post',\n  initialState,\n  reducers: {\n    get_all_post(state, action) {\n      state.posts = action.payload;\n      state.loading = false;\n    },\n    post_error(state, action) {\n      state.loading = false;\n      if (action.payload === 'success') {\n        document.getElementsByClassName('post-error-head')[0].classList.add('hide');\n        return;\n      }\n      let n = action.payload.length;\n      state.error = [];\n      document.getElementsByClassName('post-error-head')[0].classList.remove('hide');\n      for (let i = 0; i < n; i++) {\n        state.error.push(action.payload[i].msg);\n      }\n    },\n    get_post(state, action) {\n      state.post = action.payload;\n      state.loading = false;\n    }\n  }\n});\nexport const {\n  get_all_post,\n  post_error,\n  get_post\n} = postSlice.actions;\nexport default postSlice.reducer;\nexport function addPost(text) {\n  return async function addPostThunks(dispatch, getState) {\n    try {\n      let data = {\n        text: text\n      };\n      console.log(data);\n      await axios.post('http://localhost:5000/api/post', data);\n      dispatch(post_error('success'));\n      dispatch(getAllPost());\n    } catch (err) {\n      console.log(err);\n      dispatch(post_error(err.response.data.errors));\n    }\n  };\n}\nexport function getAllPost() {\n  return async function getAllPostThunks(dispatch, getState) {\n    try {\n      const res = await axios.get('http://localhost:5000/api/post');\n      dispatch(get_all_post(res.data));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}\nexport function addLike(id) {\n  return async function addLikeThunks(dispatch, getState) {\n    try {\n      await axios.put(`http://localhost:5000/api/post/like/${id}`);\n      dispatch(getAllPost());\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}\nexport function addUnlike(id) {\n  return async function addUnikeThunks(dispatch, getState) {\n    try {\n      await axios.put(`http://localhost:5000/api/post/unlike/${id}`);\n      dispatch(getAllPost());\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}\nexport function deletePost(id) {\n  return async function deletePostThunks(dispatch, getState) {\n    try {\n      await axios.delete(`http://localhost:5000/api/post/${id}`);\n      dispatch(getAllPost());\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}\nexport function getPost(id) {\n  return async function deletePostThunks(dispatch, getState) {\n    try {\n      const res = await axios.get(`http://localhost:5000/api/post/${id}`);\n      dispatch(get_post(res.data));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}\nexport function addComment(id, text) {\n  return async function addCommentThunks(dispatch, getState) {\n    try {\n      let data = {\n        text: text\n      };\n      await axios.post(`http://localhost:5000/api/post/comment/${id}`, data);\n      dispatch(getAllPost());\n    } catch (err) {\n      console.log(err);\n    }\n  };\n}","map":{"version":3,"names":["createSlice","axios","initialState","post","posts","error","loading","postSlice","name","reducers","get_all_post","state","action","payload","post_error","document","getElementsByClassName","classList","add","n","length","remove","i","push","msg","get_post","actions","reducer","addPost","text","addPostThunks","dispatch","getState","data","console","log","getAllPost","err","response","errors","getAllPostThunks","res","get","addLike","id","addLikeThunks","put","addUnlike","addUnikeThunks","deletePost","deletePostThunks","delete","getPost","addComment","addCommentThunks"],"sources":["C:/game/mern/frontend/src/reducer/postSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n    post:null,\r\n    posts:[],\r\n    error:[],\r\n    loading:true\r\n}\r\n\r\nconst postSlice = createSlice({\r\n    name:'post',\r\n    initialState,\r\n    reducers:{\r\n        get_all_post(state,action){\r\n            state.posts = action.payload;\r\n            state.loading=false;\r\n        },\r\n        post_error(state,action){\r\n            state.loading=false;\r\n            if(action.payload==='success'){\r\n                document.getElementsByClassName('post-error-head')[0].classList.add('hide');\r\n                return;\r\n            }\r\n            let n=action.payload.length;\r\n            state.error=[];\r\n            \r\n            document.getElementsByClassName('post-error-head')[0].classList.remove('hide');            \r\n            for(let i=0;i<n;i++){\r\n                state.error.push(action.payload[i].msg);   \r\n            }\r\n        },\r\n        get_post(state,action){\r\n            state.post=action.payload;\r\n            state.loading=false;\r\n        }\r\n    }\r\n    \r\n});\r\nexport const {get_all_post,post_error,get_post} = postSlice.actions;\r\nexport default postSlice.reducer;\r\n\r\nexport function addPost(text){\r\n    return async function addPostThunks(dispatch,getState){\r\n        try{\r\n            let data={\r\n                text:text\r\n            };\r\n            console.log(data);\r\n            await axios.post('http://localhost:5000/api/post',data);\r\n            dispatch(post_error('success'));\r\n            dispatch(getAllPost());\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n            dispatch(post_error(err.response.data.errors));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getAllPost(){\r\n    return async function getAllPostThunks(dispatch,getState){\r\n        try{\r\n            const res=await axios.get('http://localhost:5000/api/post');\r\n            dispatch(get_all_post(res.data));\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function addLike(id){\r\n    return async function addLikeThunks(dispatch,getState){\r\n        try{\r\n            await axios.put(`http://localhost:5000/api/post/like/${id}`);\r\n            dispatch(getAllPost());\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\nexport function addUnlike(id){\r\n    return async function addUnikeThunks(dispatch,getState){\r\n        try{\r\n            await axios.put(`http://localhost:5000/api/post/unlike/${id}`);\r\n            dispatch(getAllPost());\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function deletePost(id){\r\n    return async function deletePostThunks(dispatch,getState){\r\n        try{\r\n            await axios.delete(`http://localhost:5000/api/post/${id}`);\r\n            dispatch(getAllPost());\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function getPost(id){\r\n    return async function deletePostThunks(dispatch,getState){\r\n        try{\r\n           const res= await axios.get(`http://localhost:5000/api/post/${id}`);\r\n            dispatch(get_post(res.data));\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function addComment(id,text){\r\n    return async function addCommentThunks(dispatch,getState){\r\n        try{\r\n            let data = {\r\n                text:text\r\n            };\r\n           await axios.post(`http://localhost:5000/api/post/comment/${id}`,data);\r\n            dispatch(getAllPost());\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}