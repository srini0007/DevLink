{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nimport { loadUser, log_out, register_success } from \"./authSlice\";\nconst initialState = {\n  auth_error: []\n};\nconst autherrorSlice = createSlice({\n  name: 'autherror',\n  initialState,\n  reducers: {\n    AddErrorSign(state, action) {\n      if (action.payload === 'success') {\n        document.getElementsByClassName('sign-error-head')[0].classList.add('hide');\n        return;\n      }\n      let n = action.payload.length;\n      state.auth_error = [];\n      document.getElementsByClassName('sign-error-head')[0].classList.remove('hide');\n      for (let i = 0; i < n; i++) {\n        state.auth_error.push(action.payload[i].msg);\n      }\n    },\n    AddErrorLog(state, action) {\n      if (action.payload === 'success') {\n        document.getElementsByClassName('log-error-head')[0].classList.add('hide');\n        return;\n      }\n      let n = action.payload.length;\n      state.auth_error = [];\n      document.getElementsByClassName('log-error-head')[0].classList.remove('hide');\n      for (let i = 0; i < n; i++) {\n        state.auth_error.push(action.payload[i].msg);\n      }\n    }\n  }\n});\nexport function handleSign(name, email, pass) {\n  return async function handleSignThunk(dispatch, getState) {\n    try {\n      let data = {\n        name: name,\n        email: email,\n        password: pass\n      };\n      const res = await axios.post('http://localhost:5000/api/users', data);\n      dispatch(AddErrorSign('success'));\n      dispatch(register_success(res.data));\n      dispatch(loadUser());\n    } catch (err) {\n      dispatch(AddErrorSign(err.response.data.errors));\n      dispatch(log_out());\n    }\n  };\n}\nexport function handleLog(email, pass) {\n  return async function handleLogThunk(dispatch, getState) {\n    try {\n      let data = {\n        email: email,\n        password: pass\n      };\n      const res = await axios.post('http://localhost:5000/api/auth', data);\n      dispatch(AddErrorLog('success'));\n      dispatch(register_success(res.data));\n      // dispatch(loadUser());\n    } catch (err) {\n      dispatch(AddErrorLog(err.response.data.errors));\n      dispatch(log_out());\n    }\n  };\n}\nexport const {\n  AddErrorSign,\n  AddErrorLog\n} = autherrorSlice.actions;\nexport default autherrorSlice.reducer;","map":{"version":3,"names":["createSlice","axios","loadUser","log_out","register_success","initialState","auth_error","autherrorSlice","name","reducers","AddErrorSign","state","action","payload","document","getElementsByClassName","classList","add","n","length","remove","i","push","msg","AddErrorLog","handleSign","email","pass","handleSignThunk","dispatch","getState","data","password","res","post","err","response","errors","handleLog","handleLogThunk","actions","reducer"],"sources":["C:/game/mern/frontend/src/reducer/autherrorSlice.js"],"sourcesContent":["import {createSlice} from \"@reduxjs/toolkit\";\r\nimport axios from 'axios';\r\nimport { loadUser, log_out, register_success } from \"./authSlice\";\r\n\r\nconst initialState = {\r\n    auth_error:[]\r\n}\r\n\r\n\r\nconst autherrorSlice = createSlice({\r\n    name:'autherror',\r\n    initialState,\r\n    reducers:{\r\n        \r\n        AddErrorSign(state,action){\r\n            if(action.payload==='success'){\r\n                document.getElementsByClassName('sign-error-head')[0].classList.add('hide');\r\n                return;\r\n            }\r\n            let n=action.payload.length;\r\n            state.auth_error=[];\r\n            \r\n            document.getElementsByClassName('sign-error-head')[0].classList.remove('hide');            \r\n            for(let i=0;i<n;i++){\r\n                state.auth_error.push(action.payload[i].msg);   \r\n            }\r\n        },AddErrorLog(state,action){\r\n            if(action.payload==='success'){\r\n                document.getElementsByClassName('log-error-head')[0].classList.add('hide');\r\n                return;\r\n            }\r\n            let n=action.payload.length;\r\n            state.auth_error=[];\r\n            \r\n            document.getElementsByClassName('log-error-head')[0].classList.remove('hide');            \r\n            for(let i=0;i<n;i++){\r\n                state.auth_error.push(action.payload[i].msg);   \r\n            }\r\n        }\r\n        \r\n    }\r\n});\r\n\r\n\r\n   \r\nexport function handleSign(name,email,pass){\r\n    return async function handleSignThunk(dispatch,getState){\r\n        try{\r\n\r\n            let data={\r\n                name:name,\r\n                email:email,\r\n                password:pass\r\n            };\r\n            \r\n            const res= await axios.post('http://localhost:5000/api/users',data);\r\n            dispatch(AddErrorSign('success'));\r\n            dispatch(register_success(res.data));\r\n            dispatch(loadUser());\r\n\r\n        }catch(err){\r\n            dispatch(AddErrorSign(err.response.data.errors));\r\n            dispatch(log_out());\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport function handleLog(email,pass){\r\n    return async function handleLogThunk(dispatch,getState){\r\n        try{\r\n\r\n            let data={\r\n                email:email,\r\n                password:pass\r\n            };\r\n            const res= await axios.post('http://localhost:5000/api/auth',data);\r\n            dispatch(AddErrorLog('success'));\r\n            dispatch(register_success(res.data));\r\n            // dispatch(loadUser());\r\n        }catch(err){\r\n            dispatch(AddErrorLog(err.response.data.errors));\r\n            dispatch(log_out());\r\n        }\r\n    }\r\n}\r\n\r\nexport const {AddErrorSign,AddErrorLog} = autherrorSlice.actions;\r\nexport default autherrorSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}