{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nconst initialState = {\n  auth: null,\n  token: localStorage.getItem('token'),\n  loading: true,\n  user: null\n};\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducer: {\n    register_success(state, action) {\n      state.auth = true;\n      state.loading = false;\n      localStorage.setItem('token', action.payload);\n    },\n    register_fail(state, action) {\n      localStorage.removeItem('token');\n      state.token = null;\n      state.auth = false;\n      state.loading = false;\n    },\n    user_loaded(state, action) {\n      state.auth = true;\n      state.loading = false;\n      state.user = action.payload;\n    }\n  }\n});\nexport const {\n  register_success,\n  register_fail,\n  user_loaded\n} = authSlice.actions;\nexport default authSlice.reducer;\nexport function loadUser() {\n  return async function userLoadedThunks(dispatch, getState) {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n    }\n    try {\n      const res = await axios.get('http://localhost:5000/api/auth');\n      dispatch(user_loaded(res.data));\n    } catch (err) {\n      console.log(\"error is \", err);\n    }\n  };\n}","map":{"version":3,"names":["createSlice","setAuthToken","axios","useDispatch","initialState","auth","token","localStorage","getItem","loading","user","authSlice","name","reducer","register_success","state","action","setItem","payload","register_fail","removeItem","user_loaded","actions","loadUser","userLoadedThunks","dispatch","getState","res","get","data","err","console","log"],"sources":["C:/game/mern/frontend/src/reducer/authSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport setAuthToken from \"../utils/setAuthToken\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nconst initialState = {\r\n    auth:null,\r\n    token:localStorage.getItem('token'),\r\n    loading:true,\r\n    user:null\r\n}\r\n\r\nconst authSlice= createSlice({\r\n    name:\"auth\",\r\n    initialState,\r\n    reducer:{\r\n        register_success(state,action){\r\n            state.auth=true;\r\n            state.loading=false;\r\n            localStorage.setItem('token',action.payload);\r\n        },\r\n        register_fail(state,action){\r\n            localStorage.removeItem('token');\r\n            state.token=null;\r\n            state.auth=false;\r\n            state.loading=false;\r\n        },\r\n        user_loaded(state,action){\r\n            state.auth=true;\r\n            state.loading=false;\r\n            state.user=action.payload;\r\n        }\r\n    }\r\n})\r\n\r\nexport const {register_success,register_fail,user_loaded} = authSlice.actions;\r\nexport default authSlice.reducer;\r\n\r\nexport function loadUser(){\r\n    return async function userLoadedThunks(dispatch,getState){\r\n\r\n        if(localStorage.token){\r\n            setAuthToken(localStorage.token);\r\n        }\r\n        \r\n        try {\r\n            const res= await axios.get('http://localhost:5000/api/auth');\r\n            dispatch(user_loaded(res.data));\r\n        } catch (err) {\r\n            console.log(\"error is \",err);\r\n        }\r\n    }\r\n}"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,YAAY,MAAM,uBAAuB;AAChD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,aAAa;AACzC,MAAMC,YAAY,GAAG;EACjBC,IAAI,EAAC,IAAI;EACTC,KAAK,EAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACnCC,OAAO,EAAC,IAAI;EACZC,IAAI,EAAC;AACT,CAAC;AAED,MAAMC,SAAS,GAAEX,WAAW,CAAC;EACzBY,IAAI,EAAC,MAAM;EACXR,YAAY;EACZS,OAAO,EAAC;IACJC,gBAAgBA,CAACC,KAAK,EAACC,MAAM,EAAC;MAC1BD,KAAK,CAACV,IAAI,GAAC,IAAI;MACfU,KAAK,CAACN,OAAO,GAAC,KAAK;MACnBF,YAAY,CAACU,OAAO,CAAC,OAAO,EAACD,MAAM,CAACE,OAAO,CAAC;IAChD,CAAC;IACDC,aAAaA,CAACJ,KAAK,EAACC,MAAM,EAAC;MACvBT,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;MAChCL,KAAK,CAACT,KAAK,GAAC,IAAI;MAChBS,KAAK,CAACV,IAAI,GAAC,KAAK;MAChBU,KAAK,CAACN,OAAO,GAAC,KAAK;IACvB,CAAC;IACDY,WAAWA,CAACN,KAAK,EAACC,MAAM,EAAC;MACrBD,KAAK,CAACV,IAAI,GAAC,IAAI;MACfU,KAAK,CAACN,OAAO,GAAC,KAAK;MACnBM,KAAK,CAACL,IAAI,GAACM,MAAM,CAACE,OAAO;IAC7B;EACJ;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAACJ,gBAAgB;EAACK,aAAa;EAACE;AAAW,CAAC,GAAGV,SAAS,CAACW,OAAO;AAC7E,eAAeX,SAAS,CAACE,OAAO;AAEhC,OAAO,SAASU,QAAQA,CAAA,EAAE;EACtB,OAAO,eAAeC,gBAAgBA,CAACC,QAAQ,EAACC,QAAQ,EAAC;IAErD,IAAGnB,YAAY,CAACD,KAAK,EAAC;MAClBL,YAAY,CAACM,YAAY,CAACD,KAAK,CAAC;IACpC;IAEA,IAAI;MACA,MAAMqB,GAAG,GAAE,MAAMzB,KAAK,CAAC0B,GAAG,CAAC,gCAAgC,CAAC;MAC5DH,QAAQ,CAACJ,WAAW,CAACM,GAAG,CAACE,IAAI,CAAC,CAAC;IACnC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVC,OAAO,CAACC,GAAG,CAAC,WAAW,EAACF,GAAG,CAAC;IAChC;EACJ,CAAC;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}